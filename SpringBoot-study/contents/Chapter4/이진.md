# CRUD & Date

# CRUD란?
- 서비스의 자원 
- Create, Read, Update, Delete
- CRUD 실습


## 서비스의 자원 
뉴스 페이지는 기사 , 제목, 본문 내용 뿐만 아니라 , 기사와 관계를 맺어서 생기는 자원들도 함께 
나타난다. 
![](https://images.velog.io/images/jinii/post/56abc277-48b6-48ec-9885-4fd68b068ebd/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-02-22%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2012.33.43.png)
![](https://images.velog.io/images/jinii/post/c1fa59e0-4c2d-4313-a3fb-938227262349/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-02-22%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2012.33.14.png)

### 웹서비스 
- 사용자가 원하는 자원의 관리
- 지원 제공, 제작, 갱신 등

### 주소록을 만든다면?? 
- Create : 생성
- Read: 조회
- Update : 갱신
- Delete : 삭제 
  
```java
// 이 방법은 Restful 하지 않다
// 무작정 CRUD 만든 것 
@Controller
@ResponseBody //클래스 안에 있는 모든 함수 들이 ResponseBody가 붙어 있는 형태로 함수 선언이 완료 됨
@RequestMapping("post") //클래스 내부에 있는 RequestMapping 의 내용에 따라서 모두다 앞쪽에 post가 붙는다
public class PostController {

    private static final Logger logger = LoggerFactory.getLogger(PostController.class);
    private final List<PostDto> postList; //초기화
    
    public PostController(){
        postList = new ArrayList<>();
    }
    // http://localhost:8080/post/create # body에 JSON 형태의 data 넣기 
    //게시글 작성을 위한 데이터가 필요
    @PostMapping("create")
    public void createPost(@RequestBody PostDto postDto){
        logger.info(postDto.toString());
        this.postList.add(postDto);
    }


    // http://localhost:8080/post/read-all
    @GetMapping("read-all")
    public List<PostDto> readPostAll(){
        logger.info("in read all");
        return this.postList;
    }

    // http://localhost:8080/post/read-one?id=0
    @GetMapping("read-one")
    public PostDto readPostOne(@RequestParam("id") int id){
        logger.info("in read one");
        return this.postList.get(id);
    }
    //http://localhost:8080/post/update?id=1   # body에 JSON 형태의 바꿀 data 넣기 
    @PostMapping("update")
    public void updatePost(@RequestParam("id") int id, @RequestBody PostDto postDto){
        PostDto targetPost = this.postList.get(id);
        if (postDto.getTitle() != null){
            targetPost.setTitle(postDto.getTitle());
        }
        if (postDto.getContent()!= null){
            targetPost.setContent(postDto.getContent());
        }
        this.postList.set(id, targetPost);
    }

    //http://localhost:8080/post/delete?id=0
    @DeleteMapping("delete")
    public void deletePost(@RequestParam("id") int id){
        this.postList.remove(id);
    }
}

```

